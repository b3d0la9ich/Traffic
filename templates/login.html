<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–í—Ö–æ–¥</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
    <script defer src="{{ url_for('static', filename='js/theme-toggle.js') }}"></script>
    <script>
        function validateForm(event) {
            let username = document.getElementById("username").value.trim();
            let password = document.getElementById("password").value.trim();
            if (username === "" || password === "") {
                alert("–û—à–∏–±–∫–∞: –ø–æ–ª—è –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏ –∏–ª–∏ —Å–æ—Å—Ç–æ—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ –ø—Ä–æ–±–µ–ª–æ–≤!");
                event.preventDefault();
            }
        }
    </script>
</head>
<body>

    <header>
        <a href="{{ url_for('index') }}" class="menu-button">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</a>
        <div class="theme-toggle">
            <button id="toggle-theme">üåô</button>
        </div>
    </header>

    <div class="login-container">
        <h2>–í—Ö–æ–¥</h2>

        {% with messages = get_flashed_messages(with_categories=true, category_filter=['auth_success','auth_warning','auth_info','auth_danger']) %}
          {% if messages %}
            <div class="flash-messages">
              {% for category, message in messages %}
                <div class="flash {{ category }}">{{ message }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <form method="POST" onsubmit="validateForm(event)" autocomplete="on">
            <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
            <input type="text"
                   id="username"
                   name="username"
                   required
                   minlength="3"
                   pattern="\S+"
                   autocomplete="username"
                   spellcheck="false"
                   title="–õ–æ–≥–∏–Ω –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤, –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞"
                   value="{{ request.form.get('username','') }}">

            <label for="password">–ü–∞—Ä–æ–ª—å:</label>
            <input type="password"
                   id="password"
                   name="password"
                   required
                   minlength="8"
                   pattern="\S+"
                   autocomplete="current-password"
                   title="–ü–∞—Ä–æ–ª—å –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤, –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤">

            <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
        <p>–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="{{ url_for('register') }}">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a></p>
    </div>

</body>
</html>
