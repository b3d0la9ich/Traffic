<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/edit_data.css') }}">
  <script defer src="{{ url_for('static', filename='js/theme-toggle.js') }}"></script>
  <script>
    function syncMonthMax() {
      const y = document.getElementById('year');
      const m = document.getElementById('month');
      if (!y || !m) return;
      if (y.value === '2025') {
        m.max = 9;
        if (parseInt(m.value || '0', 10) > 9) m.value = 9;
      } else {
        m.max = 12;
      }
    }
    document.addEventListener('DOMContentLoaded', syncMonthMax);
  </script>
</head>
<body>
  <div class="theme-toggle">
    <button id="toggle-theme">üåô</button>
  </div>

  <div class="form-card">
    <h2>–ò–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–ø–æ—Ç–æ–∫–µ</h2>

    {% with messages = get_flashed_messages(with_categories=true, category_filter=['edit_success','edit_warning','edit_danger']) %}
      {% if messages %}
        <div class="flash-messages">
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form method="POST" autocomplete="off">
      <label for="year">–ì–æ–¥:</label>
      <input id="year"
             type="number"
             name="year"
             min="2016"
             max="2025"
             required
             value="{{ request.form.get('year','') }}"
             oninput="syncMonthMax()">

      <label for="month">–ú–µ—Å—è—Ü:</label>
      <input id="month"
             type="number"
             name="month"
             min="1"
             max="12"
             required
             value="{{ request.form.get('month','') }}">

      <label for="passengers">–ù–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤:</label>
      <input id="passengers"
             type="number"
             name="passengers"
             min="0"
             required
             value="{{ request.form.get('passengers','') }}">

      <button type="submit">–ò–∑–º–µ–Ω–∏—Ç—å</button>
    </form>

    <a class="back-link" href="{{ url_for('dashboard') }}">‚Üê –ù–∞–∑–∞–¥</a>
  </div>
</body>
</html>
